<app-header></app-header>
            <!-- Drop Down Task -->
        <div class="dropdowns" style="margin-left: 20px;" *ngIf="calibrationDone">
            <div>
                <span class="dropdown-label">Task: </span>
                <select [(ngModel)]="selectedTask"(change)="selectTask()"> 
                    <option *ngFor="let item of TaskType | keyvalue">{{item.value}}</option>
                </select>
            </div>
            
            <!-- Drop Down InputType -->
            <div>
                <span class="dropdown-label">Input variant: </span>
                <select [(ngModel)]="selectedInputType" (change)="selectInputType()" > 
                    <option *ngFor="let item of InputType | keyvalue">{{item.value}}</option>
                </select>
            </div>
        </div>

        <button (click)="taskEvaluationService.startTask()">Start</button>
        <button (click)="taskEvaluationService.endTask()">End</button>
        <button (click)="taskEvaluationService.exportResults()">Export</button>

<div *ngIf="!webgazerService.webgazerLoaded"> <!-- style="display:flex;justify-content:center;align-items:center;width:100%;height:100%;" -->
    <div class="popup-full-background"></div>
    <div class="Popup">            
        <mat-spinner [diameter]="30" ></mat-spinner>
        <div>
            Please wait. Everything is being prepared...
        </div>            
        <div style="padding-top: 30px; font-weight: bold;">
            If your browser asks for permission to use your camera, please click "Allow".
        </div>        
    </div>
</div>

<div class="button-header-container">
    <button class="button-header" style="margin: 0px 10px;" type="button" *ngIf="!calibrationDone"
        (click)="calibrationDone = true;">Skip callibration
    </button>
    <span *ngIf="!webgazerService.paused">
        <button  class="button-header" mat-icon-button style="margin: 0px 0px;" type="button" (click)="webgazerService.togglePauseWebgazer()">
            <mat-icon>pause</mat-icon>
        </button>
    </span>
    <span *ngIf="webgazerService.paused">
        <button class="button-header" mat-icon-button style="margin: 0px 10px;" type="button" (click)="webgazerService.togglePauseWebgazer()">
            <mat-icon>play_arrow</mat-icon>
        </button>
    </span>
    <button *ngIf="!calibrationDone" class="button-header" mat-icon-button style="margin: 0px 10px;" type="button" (click)="showExplanation();">
        <mat-icon>question_mark</mat-icon>
    </button> 
</div>
        

<!-- content -->
<div class="content" *ngIf="webgazerService.webgazerLoaded">

    <span class="angle">❯</span>
    <div class="instructions">{{this.instructions}}</div>

    <app-calibration *ngIf="!calibrationDone" 
        (calibrationDoneEvent)="setCalibrationDone($event)">
    </app-calibration>
    
    <div *ngIf="calibrationDone">
         <div id="experimentSandbox">
            <app-click *ngIf="(selectedTask$ | async) == TaskType.SELECT"></app-click>
            <app-hover *ngIf="(selectedTask$ | async) == TaskType.HOVER"></app-hover>                
            <app-scroll *ngIf="(selectedTask$ | async) == TaskType.SCROLL"></app-scroll>
            <img id="arrow" class="arrow" src="/assets/arrow.png" />
        </div>

        <div *ngIf="showPopup" style="display:flex;justify-content:center;">
                <div class="popup-background"></div> 
                <div class="Popup">
                    <div class="popup-header">
                        <span>Calibration was successful!</span>
                        <button class="Popup-close" (click)="showPopup=false;">×</button>
                    </div>
                    Now, your eyes are being tracked :)
                </div>
        </div>
    </div>
</div>